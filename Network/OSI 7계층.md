OSI 7계층은 네트워크 통신 과정을 **7개의 계층으로 나누어 표준화한 참조 모델**로, 각 계층이 독립적인 역할을 담당하여 통신의 복잡성을 분리합니다.

## 왜 계층을 나누는가

```
[계층이 없다면]
하나의 프로그램이 데이터 생성, 암호화, 압축, 주소 지정,
전기 신호 변환까지 모두 담당
→ 하나를 수정하면 전체에 영향
→ 유지보수 불가능

[계층을 나누면]
각 계층이 독립적으로 동작
→ 한 계층을 변경해도 다른 계층에 영향 없음
→ 예: Wi-Fi → 5G로 바꿔도 (1계층 변경) 웹 브라우저(7계층)는 그대로 동작
```

## 7계층 전체 구조

```
[데이터 전송 방향: 위 → 아래 (송신) / 아래 → 위 (수신)]

계층 7  응용 계층 (Application)     ← 사용자와 직접 상호작용
계층 6  표현 계층 (Presentation)    ← 데이터 형식 변환
계층 5  세션 계층 (Session)         ← 연결 관리
계층 4  전송 계층 (Transport)       ← 신뢰성 있는 전송
계층 3  네트워크 계층 (Network)      ← 경로 결정 (라우팅)
계층 2  데이터링크 계층 (Data Link)  ← 같은 네트워크 내 전송
계층 1  물리 계층 (Physical)        ← 전기/광 신호 전송
```

## 각 계층 상세

### 7계층 — 응용 계층 (Application)

```
사용자가 직접 사용하는 서비스/프로토콜

프로토콜: HTTP, HTTPS, FTP, SMTP, DNS
장비: -
데이터 단위: 메시지 (Message)

예시: 웹 브라우저에서 https://google.com 접속
     → HTTP 요청 생성
```

### 6계층 — 표현 계층 (Presentation)

```
데이터의 형식 변환, 암호화, 압축

역할: 인코딩/디코딩, 암호화/복호화, 압축/해제
프로토콜: SSL/TLS, JPEG, MPEG, ASCII, UTF-8
데이터 단위: 메시지 (Message)

예시: HTTPS 통신 시 TLS 암호화
     이미지를 JPEG로 압축하여 전송
```

### 5계층 — 세션 계층 (Session)

```
통신 세션의 생성, 유지, 종료 관리

역할: 연결 설정/해제, 동기화 포인트 관리
프로토콜: NetBIOS, RPC
데이터 단위: 메시지 (Message)

예시: 화상 회의 중 연결 유지
     파일 전송 중 끊기면 이어받기 (체크포인트)
```

### 4계층 — 전송 계층 (Transport)

```
프로세스 간 신뢰성 있는 데이터 전송

역할: 포트 번호로 프로세스 식별, 흐름 제어, 오류 복구
프로토콜: TCP, UDP
장비: -
데이터 단위: 세그먼트 (Segment) / 데이터그램 (Datagram)

예시: TCP → 웹 브라우저(포트 80)와 서버 간 신뢰성 있는 통신
     UDP → 실시간 스트리밍 (속도 우선)
```

### 3계층 — 네트워크 계층 (Network)

```
다른 네트워크 간의 경로 결정 (라우팅)

역할: IP 주소 기반 라우팅, 논리적 주소 지정
프로토콜: IP, ICMP, ARP
장비: 라우터, L3 스위치
데이터 단위: 패킷 (Packet)

예시: 서울에서 미국 서버까지 최적 경로 결정
     IP 주소로 목적지 식별 (192.168.0.1)
```

### 2계층 — 데이터링크 계층 (Data Link)

```
같은 네트워크 내에서의 노드 간 전송

역할: MAC 주소 기반 통신, 프레임 구성, 오류 검출
프로토콜: Ethernet, Wi-Fi (802.11)
장비: 스위치, 브릿지
데이터 단위: 프레임 (Frame)

예시: 같은 공유기에 연결된 PC와 프린터 간 통신
     MAC 주소로 장비 식별 (AA:BB:CC:DD:EE:FF)
```

### 1계층 — 물리 계층 (Physical)

```
실제 전기/광/무선 신호로 비트를 전송

역할: 0과 1을 전기 신호, 빛, 전파로 변환
장비: 케이블, 허브, 리피터
데이터 단위: 비트 (Bit)

예시: LAN 케이블을 통해 전기 신호 전송
     Wi-Fi를 통해 전파 신호 전송
```

## 데이터 캡슐화 과정

```
[송신 — 위에서 아래로 (캡슐화)]

7계층: [데이터]
         ↓
4계층: [TCP 헤더][데이터]                    → 세그먼트
         ↓
3계층: [IP 헤더][TCP 헤더][데이터]            → 패킷
         ↓
2계층: [Ethernet 헤더][IP 헤더][TCP 헤더][데이터][Trailer] → 프레임
         ↓
1계층: 0101001110110...                      → 비트 (전기 신호)


[수신 — 아래에서 위로 (역캡슐화)]

1계층: 비트 수신 → 프레임으로 복원
         ↓
2계층: Ethernet 헤더 제거 → 패킷 추출
         ↓
3계층: IP 헤더 제거 → 세그먼트 추출
         ↓
4계층: TCP 헤더 제거 → 데이터 추출
         ↓
7계층: 애플리케이션이 데이터 수신
```

## 웹 페이지 요청으로 이해하기

```
[브라우저에서 https://shop.com/products 접속]

7계층 (Application):  HTTP 요청 생성
                      GET /products HTTP/1.1

6계층 (Presentation): TLS 암호화 적용

5계층 (Session):      TCP 연결 세션 관리

4계층 (Transport):    TCP 세그먼트 생성
                      출발 포트: 54321 → 목적 포트: 443

3계층 (Network):      IP 패킷 생성
                      출발 IP: 192.168.0.10 → 목적 IP: 13.225.xxx.xxx

2계층 (Data Link):    Ethernet 프레임 생성
                      출발 MAC → 공유기 MAC

1계층 (Physical):     전기 신호로 변환하여 LAN 케이블/Wi-Fi로 전송
```

## OSI 7계층 vs TCP/IP 4계층

실무에서는 OSI 7계층보다 **TCP/IP 4계층**을 더 많이 사용합니다.

```
OSI 7계층              TCP/IP 4계층
┌──────────────┐      ┌──────────────┐
│ 7. 응용       │      │              │
│ 6. 표현       │─────→│ 4. 응용       │  HTTP, DNS, FTP
│ 5. 세션       │      │              │
├──────────────┤      ├──────────────┤
│ 4. 전송       │─────→│ 3. 전송       │  TCP, UDP
├──────────────┤      ├──────────────┤
│ 3. 네트워크   │─────→│ 2. 인터넷     │  IP, ICMP
├──────────────┤      ├──────────────┤
│ 2. 데이터링크  │─────→│ 1. 네트워크   │  Ethernet, Wi-Fi
│ 1. 물리       │      │   인터페이스   │
└──────────────┘      └──────────────┘

OSI: 이론적 참조 모델 (개념 설명용)
TCP/IP: 실제 인터넷에서 사용하는 프로토콜 모델
```

|항목|OSI 7계층|TCP/IP 4계층|
|---|---|---|
|**목적**|이론적 표준|실무 구현|
|**계층 수**|7개|4개|
|**5~7계층**|각각 분리|응용 계층으로 통합|
|**1~2계층**|각각 분리|네트워크 인터페이스로 통합|
|**실무 사용**|개념 설명, 면접|실제 네트워크 구현|

## 각 계층에서 동작하는 장비

```
7계층: 웹 서버, 메일 서버 (소프트웨어)
4계층: L4 로드밸런서 (포트 기반 분배)
3계층: 라우터, L3 스위치 (IP 기반 라우팅)
2계층: L2 스위치 (MAC 기반 전달)
1계층: 허브, 리피터, 케이블 (신호 전달/증폭)
```

## 면접 포인트

- OSI 7계층은 **이론적 참조 모델**이고, 실제 인터넷은 **TCP/IP 4계층**으로 동작합니다. 두 모델의 차이와 매핑 관계를 설명할 수 있어야 합니다.
- 각 계층의 **역할, 프로토콜, 데이터 단위, 장비**를 구분할 수 있어야 하며, 특히 4계층(TCP/UDP)과 3계층(IP)은 자주 출제됩니다.
- 계층을 나누는 핵심 이유는 **관심사의 분리**이며, 한 계층의 변경이 다른 계층에 영향을 주지 않는 독립성을 보장합니다. 이는 소프트웨어의 레이어드 아키텍처와 동일한 원리입니다.